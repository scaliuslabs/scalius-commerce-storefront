---
// src/components/recursive-footer-link.astro
import type { FooterMenuLink } from "@/lib/api";

interface Props {
  links: FooterMenuLink[];
  depth?: number;
}

const { links = [], depth = 0 } = Astro.props;

// Increased indentation for deeper levels
const paddingLeft = depth > 0 ? `${depth * 12}px` : "0";
---

<ul class="space-y-2">
  {
    Array.isArray(links) &&
      links.map((link) => (
        <li>
          <a
            href={link.href}
            class="inline-flex items-center gap-2 text-base font-medium text-white/70 hover:text-white transition-colors duration-200 group"
            style={`padding-left: ${paddingLeft}`}
          >
            {depth > 0 && (
              <span class="w-1.5 h-1.5 bg-white/40 rounded-full group-hover:bg-white transition-colors shrink-0" />
            )}
            <span class="relative">
              {link.title}
              <span class="absolute -bottom-0.5 left-0 w-0 h-px bg-white/50 transition-all duration-300 group-hover:w-full" />
            </span>
          </a>

          {/* Recursive rendering for nested links */}
          {link.subMenu && link.subMenu.length > 0 && (
            <div class="mt-2 border-l border-white/10 ml-1">
              <Astro.self links={link.subMenu} depth={depth + 1} />
            </div>
          )}
        </li>
      ))
  }
</ul>
